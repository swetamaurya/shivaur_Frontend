<!DOCTYPE html>
<html
  lang="en"
  data-layout="vertical"
  data-topbar="light"
  data-sidebar="dark"
  data-sidebar-size="lg"
  data-sidebar-image="none"
>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta
      name="keywords"
      content="admin, estimates, bootstrap, business, corporate, creative, management, minimal, modern, accounts, invoice, html5, responsive, CRM, Projects"
    />
    <meta name="author" content="" />
    <title>Attendance</title>

    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="assets/img/fevicons.png"
    />

    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />

    <link
      rel="stylesheet"
      href="assets/plugins/fontawesome/css/fontawesome.min.css"
    />
    <link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css" />

    <link rel="stylesheet" href="assets/css/line-awesome.min.css" />
    <link rel="stylesheet" href="assets/css/material.css" />

    <link rel="stylesheet" href="assets/css/select2.min.css" />

    <link rel="stylesheet" href="assets/css/bootstrap-datetimepicker.min.css" />

    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <div class="main-wrapper">
      <div id="header-placeholder"></div>

      <div id="sidebar-placeholder"></div>

      <div class="page-wrapper">
        <div class="content container-fluid">
          <div class="page-header">
            <div class="row">
              <div class="col-sm-12">
                <h3 class="page-title">Attendance</h3>
                <ul class="breadcrumb">
                  <li class="breadcrumb-item">
                    <a href="attendance.html">Dashboard</a>
                  </li>
                  <li class="breadcrumb-item active">Attendance</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="row filter-row">
            <div class="col-sm-6 col-md-3">
              <div class="input-block mb-3 form-focus">
                <input type="text" class="form-control floating" placeholder="Enter Employee's Name" />
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <div class="mb-3">
                <select id="search-by-month" class="form-control floating">
                  <option disabled selected>Select Month</option>
                  <option value="1">Jan</option>
                  <option value="2">Feb</option>
                  <option value="3">Mar</option>
                  <option value="4">Apr</option>
                  <option value="5">May</option>
                  <option value="6">Jun</option>
                  <option value="7">Jul</option>
                  <option value="8">Aug</option>
                  <option value="9">Sep</option>
                  <option value="10">Oct</option>
                  <option value="11">Nov</option>
                  <option value="12">Dec</option>
                </select>
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <div class="mb-3">
                <select id="search-by-year" class="form-control floating">
                  <option disabled selected>Select Year</option>
                  <option value="2026">2026</option>
                  <option value="2025">2025</option>
                  <option value="2024">2024</option>
                  <option value="2023">2023</option>
                  <option value="2022">2022</option>
                </select>
              </div>
            </div>
            <div class="col-sm-6 col-md-3">
              <div class="d-grid">
                <a href="#" id="search-functionality" class="btn btn-success">
                  Search
                </a>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-12">
              <div class="table-responsive">
                <table
                  class="table table-striped custom-table table-nowrap mb-0"
                >
                  <thead>
                    <tr id="dateData">
                      <th>Employee Name</th>
                      <th>1</th>
                      <th>2</th>
                      <th>3</th>
                      <th>4</th>
                      <th>5</th>
                      <th>6</th>
                      <th>7</th>
                      <th>8</th>
                      <th>9</th>
                      <th>10</th>
                      <th>11</th>
                      <th>12</th>
                      <th>13</th>
                      <th>14</th>
                      <th>15</th>
                      <th>16</th>
                      <th>17</th>
                      <th>18</th>
                      <th>19</th>
                      <th>20</th>
                      <th>22</th>
                      <th>23</th>
                      <th>24</th>
                      <th>25</th>
                      <th>26</th>
                      <th>27</th>
                      <th>28</th>
                      <th>29</th>
                      <th>30</th>
                      <th>31</th>
                    </tr>
                  </thead>
                  <tbody id="attendanceTableBody"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    
    <script type="module" src="./assets/custom/attendanceLogs.js"></script>

    <script
      src="assets/js/jquery-3.7.1.min.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script
      src="assets/js/bootstrap.bundle.min.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>

    <script
      src="assets/js/jquery.slimscroll.min.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>

    <script
      src="assets/plugins/morris/morris.min.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>
    <script
      src="assets/plugins/raphael/raphael.min.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>
    <script
      src="assets/js/chart.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>
    <script
      src="assets/js/greedynav.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>

    <script
      src="assets/js/layout.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>
    <script
      src="assets/js/theme-settings.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>

    <script
      src="assets/js/app.js"
      type="a584005f29a7ae81ebc6d9e7-text/javascript"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js"
      data-cf-settings="a584005f29a7ae81ebc6d9e7-|49"
      defer
    ></script>
    <!-- <script src="./assets/custom/employees.js"></script> -->
  </body>
  <script src="./assets/custom/sidebar.js"></script>

  <!-- <script>
  const token = localStorage.getItem("token");
  const url = "http://localhost:3000/attendance"; 
async function fetchAttendanceData(month, year) {
  if (!token) {
    console.error('User authentication token is missing');
    return;
  }

  try {
    const response = await fetch(`${url}/monthYear/get?month=${month}&year=${year}`, {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      }
    });

    if (!response.ok) {
      throw new Error('Failed to fetch attendance records');
    }

    const data = await response.json();
    populateAttendanceTable(data.attendanceRecords);
  } catch (error) {
    console.error('Error fetching attendance records:', error.message);
  }
}

function populateAttendanceTable(attendanceRecords) {
  const tableBody = document.getElementById('attendanceTableBody');
  tableBody.innerHTML = ''; 

  attendanceRecords.forEach(record => {
    const row = document.createElement('tr');

    row.innerHTML = `<td>${record.name}</td>`;

    
    for (let day = 1; day <= 31; day++) {
      const attendanceForDay = record.attendance.find(att => att.day === day);
      const status = attendanceForDay ? attendanceForDay.status : 'N/A';

      
      if (status === 'Present') {
        row.innerHTML += `<td><span style="color: green;">&#10003;</span></td>`; 
      } else if (status === 'Absent') {
        row.innerHTML += `<td><span style="color: red;">&#10007;</span></td>`; 
      } else {
        row.innerHTML += `<td>N/A</td>`; 
      }
    }
    tableBody.appendChild(row);
  });
}


window.onload = () => {
   fetchAttendanceData(month, year);
};

</script> -->
</html>
